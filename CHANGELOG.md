# Saneject Changelog

## Version 0.7.0

### API Changes

- Refactored binding API to be more type-safe via generics. The API now returns only appropriate binding methods depending on whether you're binding assets or components.
- Added support for collection bindings using `BindMultipleComponents<T>()`, `BindMultipleComponents<TInterface, TConcrete>()`, and shorthand aliases `BindComponents<T>()` and `BindComponents<TInterface, TConcrete>()`.
- Added support for multiple bindings of the same type, allowing interface injection with different concretes based on the injection target using `.WhereTargetIs<T>()`.
- Enforced stricter resolution rules: interface bindings no longer resolve concrete fields.
- Added support for interface-only bindings, e.g. `BindComponent<IInterface>()`, useful for resolving collections of different concrete implementations.
- Removed dependency injector caching due to problems with target filtering and multi-binding resolution.
- `Scope.GetBindingRecursivelyUpwards()` now respects target filters and no longer returns the first match unconditionally.

### Validation & Error Handling

- Improved validation and error handling across the binding system.
- Binding configuration issues (missing, conflicting, unused bindings) are now reported in a single pass without halting injection flow.
- Added extended validation for binding declarations to detect invalid or contradictory configurations.

### Inspector & UI

- Removed legacy property drawers. All field rendering is now handled by `MonoBehaviourInspector` and `SanejectInspector`.
- Inspector draws injected collections (arrays/lists) as read-only, grayed-out UI with no editing controls.
- Interface field sync logic (`ISerializationCallbackReceiver.OnBeforeSerialize`) is now generated by Roslyn and no longer depends on `PropertyDrawer`, improving robustness.
- Tooltips added to all toggles in `UserSettingsEditorWindow`.
- Serialize interface backing fields and generated serialization methods are now hidden from IntelliSense to prevent accidental misuse.

### Testing

- Added 225 unit tests covering core functionality and edge cases. All tests are passing.

### Bug Fixes

- Fixed a bug where `[SerializeInterface]` did not work correctly in nested `[Serializable]` classes.
- Fixed a bug where interface bindings incorrectly resolved concrete fields.

## Version 0.6.0

### Roslyn Analyzers & Code Fixes

- Added a new Roslyn analyzer (`AttributesAnalyzer.dll`) that validates:
    - `[Inject]` fields must also have `[SerializeField]` or `[SerializeInterface]`.
    - `[SerializeInterface]` can only be applied to fields of interface type.
- Added code fixes that offer context-aware actions to add, remove, or correct attribute usage.
- Updated Roslyn tools documentation and reorganized project structure for clarity.

See [Roslyn Tools in Saneject](https://github.com/alexanderlarsen/Saneject?tab=readme-ov-file#roslyn-tools-in-saneject) for more details.
